---
title: "Walking through PUMS, survey and survyr"
author: "Nick Chun"
date: 2018-01-08
output:
  slidy_presentation: default
  ioslides_presentation: default
  beamer_presentation: default
---



<style>
.small-code pre code {
  font-size: 1em;
}
</style>
<div id="about-me" class="section level1">
<h1>About Me</h1>
<ul>
<li>Demographer at PSU</li>
<li>Oregon Population Forecast Program</li>
<li>Intermediate User of R and PUMS</li>
</ul>
</div>
<div id="what-is-pums" class="section level1">
<h1>What is PUMS?</h1>
<ul>
<li>Public Use Microdata Sample (PUMS)</li>
<li>Results from <a href="https://www2.census.gov/programs-surveys/acs/methodology/questionnaires/2018/quest18.pdf">ACS</a> respondents</li>
<li>Contains person-level and housing-level characteristics</li>
<li>Data aggregated to Public Use Microdata Areas (PUMA)</li>
<li>Contains at least 100,000 people</li>
<li>Built from Census Tracts, but does not necessarily nest within Counties</li>
</ul>
</div>
<div id="portland-msa" class="section level1">
<h1>Portland MSA</h1>
<p><img src="/day2/2018-08-01Presentation_files/figure-html/unnamed-chunk-1-1.png" width="672" /></p>
</div>
<div id="portland-msa-pumas" class="section level1">
<h1>Portland MSA PUMAs</h1>
<p><img src="/day2/2018-08-01Presentation_files/figure-html/unnamed-chunk-2-1.png" width="672" /></p>
</div>
<div id="pums-comparison-to-acs" class="section level1">
<h1>PUMS comparison to ACS</h1>
<ul>
<li>1 and 5 year tables</li>
<li>ACS tables are summaries of PUMS data</li>
<li>PUMS data have a smaller sample size: 1% vs ~1.5%</li>
<li>Anonymized</li>
<li>Uses
<ul>
<li>Custom Tables</li>
<li>Sample Weights</li>
<li>Modeling</li>
</ul></li>
</ul>
</div>
<div id="example-number-of-children-1-by-household-size-and-ethnicity-for-the-tri-county-area" class="section level1">
<h1>Example: Number of Children (&lt;1) by Household Size and Ethnicity For the Tri-County area</h1>
<table>
<thead>
<tr class="header">
<th align="left">hisp_class</th>
<th align="left">hh_n</th>
<th align="right">estimate</th>
<th align="right">moe</th>
<th align="right">share</th>
<th align="right">share_moe</th>
<th align="right">cv</th>
<th align="right">share_cv</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Hispanic</td>
<td align="left">hh size &lt;=4</td>
<td align="right">2218</td>
<td align="right">1251.0</td>
<td align="right">60.0</td>
<td align="right">21.3</td>
<td align="right">0.34</td>
<td align="right">0.36</td>
</tr>
<tr class="even">
<td align="left">Hispanic</td>
<td align="left">hh size &gt;4</td>
<td align="right">1480</td>
<td align="right">1032.6</td>
<td align="right">40.0</td>
<td align="right">21.7</td>
<td align="right">0.42</td>
<td align="right">0.54</td>
</tr>
<tr class="odd">
<td align="left">Not Hispanic</td>
<td align="left">hh size &lt;=4</td>
<td align="right">10064</td>
<td align="right">1765.4</td>
<td align="right">69.3</td>
<td align="right">6.0</td>
<td align="right">0.11</td>
<td align="right">0.09</td>
</tr>
<tr class="even">
<td align="left">Not Hispanic</td>
<td align="left">hh size &gt;4</td>
<td align="right">4468</td>
<td align="right">1345.6</td>
<td align="right">30.7</td>
<td align="right">8.0</td>
<td align="right">0.18</td>
<td align="right">0.26</td>
</tr>
</tbody>
</table>
</div>
<div id="example-code-design" class="section level1">
<h1>Example: Code (Design)</h1>
<pre class="r"><code>query&lt;-or_pums %&gt;% mutate(hisp_boolean= case_when(hisp&gt;1 &amp; agep==0~ &quot;Hispanic&quot;, TRUE~ &quot;Not Hispanic&quot;)) %&gt;%
  group_by(serialno) %&gt;% mutate(ncount=n()) %&gt;% ungroup() %&gt;% 
  mutate(hh_n = case_when(ncount&gt;4~&quot;hh size &gt;4&quot;, TRUE ~ &quot;hh size &lt;=4&quot;))%&gt;%
  filter(grepl(paste(tri_filter$PUMACE10,collapse = &quot;|&quot;),puma_p), agep==0,type==1)

x&lt;-svrepdesign(weights= ~pwgtp,
               repweights = &#39;pwgtp[0-9]+&#39;,
               scale=4/80,
               rscales = ncol(&#39;pwgtp[0-9]+&#39;),
               mse=T,
               combined.weights = T,
               type=&#39;JK1&#39;,
               data= query)

output&lt;-svyby(~hisp_boolean,~hh_n,x,svytotal,na.rm=T)</code></pre>
</div>
<div id="example-code-clean-up-output" class="section level1">
<h1>Example: Code (Clean Up &amp; Output)</h1>
<pre class="r"><code>output&lt;- output %&gt;% as.data.frame(.) %&gt;% 
  rename(Hispanic=hisp_booleanHispanic,`Not Hispanic`=`hisp_booleanNot Hispanic`,hisp_se=se1,n_hisp_se=se2)
rownames(output)&lt;-1:2

output&lt;-cbind(output %&gt;% select(1:3) %&gt;% gather(hisp_class,estimate,2:3),
              output %&gt;% select(1,4,5) %&gt;% gather(hisp_class,se,2:3)%&gt;% 
                select(3)) %&gt;% 
  mutate(cv=round(se/estimate,2),moe=round(se*1.645,1)) %&gt;%
  group_by(hisp_class) %&gt;% 
  mutate(total=sum(estimate),total_moe=round(moe_sum(moe,estimate),1)) %&gt;%
  ungroup() %&gt;% 
  mutate(share=round(100*estimate/total,1), share_moe=round(100*moe_prop(estimate,total,moe,total_moe),1), share_cv=round(share_moe/share,2)) %&gt;% 
  select(hisp_class,hh_n,estimate,moe,share,share_moe,cv,share_cv)%&gt;% arrange(hisp_class,hh_n)</code></pre>
<p><font size = "4px"></p>
<table>
<thead>
<tr class="header">
<th align="left">hisp_class</th>
<th align="left">hh_n</th>
<th align="right">estimate</th>
<th align="right">moe</th>
<th align="right">share</th>
<th align="right">share_moe</th>
<th align="right">cv</th>
<th align="right">share_cv</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">Hispanic</td>
<td align="left">hh size &lt;=4</td>
<td align="right">2218</td>
<td align="right">1251.0</td>
<td align="right">60.0</td>
<td align="right">21.3</td>
<td align="right">0.34</td>
<td align="right">0.36</td>
</tr>
<tr class="even">
<td align="left">Hispanic</td>
<td align="left">hh size &gt;4</td>
<td align="right">1480</td>
<td align="right">1032.6</td>
<td align="right">40.0</td>
<td align="right">21.7</td>
<td align="right">0.42</td>
<td align="right">0.54</td>
</tr>
<tr class="odd">
<td align="left">Not Hispanic</td>
<td align="left">hh size &lt;=4</td>
<td align="right">10064</td>
<td align="right">1765.4</td>
<td align="right">69.3</td>
<td align="right">6.0</td>
<td align="right">0.11</td>
<td align="right">0.09</td>
</tr>
<tr class="even">
<td align="left">Not Hispanic</td>
<td align="left">hh size &gt;4</td>
<td align="right">4468</td>
<td align="right">1345.6</td>
<td align="right">30.7</td>
<td align="right">8.0</td>
<td align="right">0.18</td>
<td align="right">0.26</td>
</tr>
<tr class="odd">
<td align="left"></font></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="downloading-pums-data" class="section level1">
<h1>Downloading PUMS Data</h1>
<p><font size = "5px"> - <a href="https://www.ipums.org">IPUMS</a></p>
<ul>
<li>Download person and housing tables by state from the <a href="https://www.census.gov/programs-surveys/acs/data/pums.html">Census</a></li>
</ul>
<pre class="r"><code>if(!require(pacman)){install.packages(&quot;pacman&quot;);library(pacman)}
p_load(tidyverse,data.table,survey,srvyr)


#String Variables are brought in as factors
options(stringsAsFactors = T)
#Variances are centered around the estimate rather than the mean of the replicate weights
options(survey.replicates.mse = T)
#Remove Scientific Notation
options(scipen = 999)
#Number of printed digits
options(digits = 2)
#fread creates data.frames instead of data.tables
options(datatable.fread.datatable=F)
#Clear environment
rm(list=ls())</code></pre>
<p></font></p>
</div>
<div id="downloading-pums-data-continued" class="section level1">
<h1>Downloading PUMS Data (Continued)</h1>
<p><font size = "5px"></p>
<pre class="r"><code>#Set Working Directory

#Read Oregon 2016 1 yr housing unit records
or_h &lt;- fread(&quot;ss16hor.csv&quot;,colClasses = c(&quot;SERIALNO&quot;=&quot;character&quot;,&quot;PUMA&quot;=&quot;character&quot;,&quot;ST&quot;=&quot;character&quot;))

#Conver column names to lower case
colnames(or_h)&lt;-tolower(colnames(or_h))

#Read person level records and convert column names to lower case
or_p&lt;-fread(&quot;ss16por.csv&quot;,colClasses = c(&quot;SERIALNO&quot;=&quot;character&quot;,&quot;PUMA&quot;=&quot;character&quot;, &quot;MIGSP&quot;=&quot;character&quot;, &quot;ST&quot;=&quot;character&quot;))
colnames(or_p)&lt;-tolower(colnames(or_p))</code></pre>
<p><a href="https://www.census.gov/programs-surveys/acs/technical-documentation/pums/documentation.html">Technical Documentation</a>:</p>
<ul>
<li><p>Data Dictionary: Detailed information about the attributes</p></li>
<li><p>Estimates for User Verification: Check your results against these numbers to make sure you are calculating the estimates and sampling error correctly. </font></p></li>
</ul>
</div>
<div id="pums-table-structure-housing-unit" class="section level1">
<h1>PUMS Table Structure (Housing Unit)</h1>
<p><font size = "5px"></p>
<p>Primary Key: serialno (housing unit id)</p>
<p>Household Weight: wgtp</p>
<p>ten: owned (1 &amp; 2), rented(3 &amp;4), gq/vacant (n/a)</p>
<p>noc: number of own children in household</p>
<p>hincp: household income</p>
<p>grpip: gross rent as percentage of hh income</p>
<p>ocpip: owner housing costs as percentage of hh income</p>
<pre class="r"><code>kable(or_h[1:5,] %&gt;% select(serialno,puma,ten,noc,hincp,grpip,ocpip,wgtp))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">serialno</th>
<th align="left">puma</th>
<th align="right">ten</th>
<th align="right">noc</th>
<th align="right">hincp</th>
<th align="right">grpip</th>
<th align="right">ocpip</th>
<th align="right">wgtp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">000000044</td>
<td align="left">00600</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">59701</td>
<td align="right">NA</td>
<td align="right">14</td>
<td align="right">15</td>
</tr>
<tr class="even">
<td align="left">000000086</td>
<td align="left">00800</td>
<td align="right">2</td>
<td align="right">0</td>
<td align="right">34500</td>
<td align="right">NA</td>
<td align="right">15</td>
<td align="right">101</td>
</tr>
<tr class="odd">
<td align="left">000000262</td>
<td align="left">01200</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="right">62500</td>
<td align="right">NA</td>
<td align="right">21</td>
<td align="right">102</td>
</tr>
<tr class="even">
<td align="left">000000271</td>
<td align="left">00901</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">33000</td>
<td align="right">NA</td>
<td align="right">30</td>
<td align="right">89</td>
</tr>
<tr class="odd">
<td align="left">000000366</td>
<td align="left">01321</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="right">68500</td>
<td align="right">22</td>
<td align="right">NA</td>
<td align="right">24</td>
</tr>
<tr class="even">
<td align="left"></font></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="pums-table-structure-person" class="section level1">
<h1>PUMS Table Structure (Person)</h1>
<p><font size = "5px"></p>
<p>Primary Key: serialno (housing unit id) &amp; sporder (person number)</p>
<p>Person Weight: pwgtp</p>
<p>sex: Male (1) and Female (2)</p>
<p>rac1p: Race code</p>
<p>hisp: Hispanic origin</p>
<p>hicov: with health insurance (1) and without health insurance (2)</p>
<p>migsp: state or country code one migrated from 1 year ago.</p>
<pre class="r"><code>kable(or_p[1:5,] %&gt;% select(serialno,sporder,puma,pwgtp,agep,sex,rac1p,hisp,hicov,migsp))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">serialno</th>
<th align="right">sporder</th>
<th align="left">puma</th>
<th align="right">pwgtp</th>
<th align="right">agep</th>
<th align="right">sex</th>
<th align="right">rac1p</th>
<th align="right">hisp</th>
<th align="right">hicov</th>
<th align="left">migsp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">000000044</td>
<td align="right">1</td>
<td align="left">00600</td>
<td align="right">15</td>
<td align="right">71</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">000000044</td>
<td align="right">2</td>
<td align="left">00600</td>
<td align="right">16</td>
<td align="right">71</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">000000086</td>
<td align="right">1</td>
<td align="left">00800</td>
<td align="right">102</td>
<td align="right">82</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left">000000086</td>
<td align="right">2</td>
<td align="left">00800</td>
<td align="right">101</td>
<td align="right">72</td>
<td align="right">2</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left"></td>
</tr>
<tr class="odd">
<td align="left">000000262</td>
<td align="right">1</td>
<td align="left">01200</td>
<td align="right">102</td>
<td align="right">66</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="right">1</td>
<td align="left"></td>
</tr>
<tr class="even">
<td align="left"></font></td>
<td align="right"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="left"></td>
</tr>
</tbody>
</table>
</div>
<div id="pums-table-structure-replicate-weights" class="section level1">
<h1>PUMS Table Structure (Replicate Weights)</h1>
<p><font size = "5px"></p>
<ul>
<li><p>80 weights used to create standard error estimates</p></li>
<li><p>Painful to work with</p></li>
<li><p>Necessary for custom tabulations</p></li>
</ul>
<pre class="r"><code>#Combine person and housing unit tables
or_pums&lt;-or_p %&gt;% left_join(or_h, by=&quot;serialno&quot;, suffix=c(&quot;_p&quot;,&quot;_h&quot;))
kable(or_pums %&gt;% select(serialno,sporder,pwgtp,wgtp,pwgtp1,pwgtp2,wgtp1,wgtp2) %&gt;% .[1:5,])</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">serialno</th>
<th align="right">sporder</th>
<th align="right">pwgtp</th>
<th align="right">wgtp</th>
<th align="right">pwgtp1</th>
<th align="right">pwgtp2</th>
<th align="right">wgtp1</th>
<th align="right">wgtp2</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">000000044</td>
<td align="right">1</td>
<td align="right">15</td>
<td align="right">15</td>
<td align="right">13</td>
<td align="right">13</td>
<td align="right">13</td>
<td align="right">13</td>
</tr>
<tr class="even">
<td align="left">000000044</td>
<td align="right">2</td>
<td align="right">16</td>
<td align="right">15</td>
<td align="right">14</td>
<td align="right">15</td>
<td align="right">13</td>
<td align="right">13</td>
</tr>
<tr class="odd">
<td align="left">000000086</td>
<td align="right">1</td>
<td align="right">102</td>
<td align="right">101</td>
<td align="right">94</td>
<td align="right">183</td>
<td align="right">93</td>
<td align="right">183</td>
</tr>
<tr class="even">
<td align="left">000000086</td>
<td align="right">2</td>
<td align="right">101</td>
<td align="right">101</td>
<td align="right">111</td>
<td align="right">186</td>
<td align="right">93</td>
<td align="right">183</td>
</tr>
<tr class="odd">
<td align="left">000000262</td>
<td align="right">1</td>
<td align="right">102</td>
<td align="right">102</td>
<td align="right">187</td>
<td align="right">101</td>
<td align="right">187</td>
<td align="right">101</td>
</tr>
<tr class="even">
<td align="left"></font></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="cost-burdened-households-by-race-ethnicity" class="section level1">
<h1>Cost Burdened Households by Race &amp; Ethnicity</h1>
<p><font size = "6px"> Create (<em>mutate</em>) race &amp; ethnicity and cost burdened field using <em>case_when</em></p>
<pre class="r"><code>#Add Race &amp; Ethnicity and Cost Burdened Fields
or_pums&lt;-or_pums%&gt;%mutate(hisp_boolean= if_else(hisp==1,0,1),
                          race_hisp=factor(case_when(rac1p==1&amp; hisp_boolean==0~&quot;wa&quot;,
                                                 rac1p==2 &amp; hisp_boolean==0~&quot;black&quot;,
                                                 c(rac1p==3|rac1p==4|rac1p==5)&amp; hisp_boolean==0~&quot;ai_an&quot;,
                                                 rac1p==6&amp; hisp_boolean==0~&quot;asian&quot;,
                                                 rac1p==7&amp; hisp_boolean==0~&quot;nh_pi&quot;,
                                                 rac1p==8&amp; hisp_boolean==0~&quot;other&quot;,
                                                 rac1p==9&amp; hisp_boolean==0~&quot;multi&quot;,
                                                 hisp_boolean==1~&quot;hisp&quot;),
                                       levels=c(&quot;wa&quot;,&quot;black&quot;,&quot;ai_an&quot;,&quot;asian&quot;,&quot;nh_pi&quot;,&quot;other&quot;,&quot;multi&quot;,&quot;hisp&quot;)), burden=factor(case_when(ocpip&gt;=30|grpip&gt;=30~ &quot;burdened&quot;, TRUE ~ &quot;not burdened&quot;)))</code></pre>
<p></font></p>
</div>
<div id="check-results" class="section level1">
<h1>Check Results</h1>
<p><font size = "6px"></p>
<pre class="r"><code>#Check Results
kable(or_pums %&gt;% select(race_hisp,rac1p,hisp_boolean,burden,ocpip,grpip) %&gt;% sample_n(.,10))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">race_hisp</th>
<th align="right">rac1p</th>
<th align="right">hisp_boolean</th>
<th align="left">burden</th>
<th align="right">ocpip</th>
<th align="right">grpip</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>22168</td>
<td align="left">wa</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td>7934</td>
<td align="left">multi</td>
<td align="right">9</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">14</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td>25198</td>
<td align="left">wa</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">21</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td>15855</td>
<td align="left">wa</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">13</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td>38511</td>
<td align="left">wa</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">8</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td>136</td>
<td align="left">wa</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">burdened</td>
<td align="right">NA</td>
<td align="right">36</td>
</tr>
<tr class="odd">
<td>3188</td>
<td align="left">ai_an</td>
<td align="right">3</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">NA</td>
<td align="right">11</td>
</tr>
<tr class="even">
<td>7003</td>
<td align="left">nh_pi</td>
<td align="right">7</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">NA</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td>24690</td>
<td align="left">wa</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">19</td>
<td align="right">NA</td>
</tr>
<tr class="even">
<td>12000</td>
<td align="left">wa</td>
<td align="right">1</td>
<td align="right">0</td>
<td align="left">not burdened</td>
<td align="right">24</td>
<td align="right">NA</td>
</tr>
<tr class="odd">
<td></font></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="survey-package-set-survey-design-person" class="section level1">
<h1>Survey Package (Set Survey Design: Person)</h1>
<p><font size = "6px"></p>
<pre class="r"><code>#person-level survey design
p_design&lt;-svrepdesign(weights= ~pwgtp,
               repweights = &#39;pwgtp[0-9]+&#39;,
               scale=4/80,
               rscales = ncol(&#39;pwgtp[0-9]+&#39;),
               mse=T,
               combined.weights = T,
               type=&#39;JK1&#39;,
               data= or_pums)</code></pre>
<p></font></p>
</div>
<div id="survey-package-set-survey-design-housing-unit" class="section level1">
<h1>Survey Package (Set Survey Design: Housing Unit)</h1>
<p><font size = "6px"></p>
<pre class="r"><code>#join race &amp; ethnicity and cost burdened fields to housing unit table
h_join&lt;-left_join(or_h, or_pums %&gt;% filter(sporder==1) %&gt;% select(serialno,race_hisp,burden),by=&quot;serialno&quot;)

#housing unit-level survey design
h_design&lt;-svrepdesign(weights= ~wgtp,
               repweights = &#39;wgtp[0-9]+&#39;,
               scale=4/80,
               rscales = ncol(&#39;wgtp[0-9]+&#39;),
               mse=T,
               combined.weights = T,
               type=&#39;JK1&#39;,
               data= h_join)</code></pre>
<p></font></p>
</div>
<div id="joining-person-and-housing-unit-tables-warning" class="section level1">
<h1>Joining Person and Housing Unit Tables: WARNING</h1>
<p><font size = "5px"> Filtering the Person table to only include the householder (sporder ==1) will remove duplicate household estimates</p>
<pre class="r"><code>kable(or_pums[1:10,] %&gt;% select(serialno,sporder,hincp) %&gt;% filter(sporder==1))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">serialno</th>
<th align="right">sporder</th>
<th align="right">hincp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">000000044</td>
<td align="right">1</td>
<td align="right">59701</td>
</tr>
<tr class="even">
<td align="left">000000086</td>
<td align="right">1</td>
<td align="right">34500</td>
</tr>
<tr class="odd">
<td align="left">000000262</td>
<td align="right">1</td>
<td align="right">62500</td>
</tr>
<tr class="even">
<td align="left">000000271</td>
<td align="right">1</td>
<td align="right">33000</td>
</tr>
<tr class="odd">
<td align="left">000000366</td>
<td align="right">1</td>
<td align="right">68500</td>
</tr>
</tbody>
</table>
<pre class="r"><code>kable(or_h[1:5,] %&gt;% select(serialno,hincp))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">serialno</th>
<th align="right">hincp</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">000000044</td>
<td align="right">59701</td>
</tr>
<tr class="even">
<td align="left">000000086</td>
<td align="right">34500</td>
</tr>
<tr class="odd">
<td align="left">000000262</td>
<td align="right">62500</td>
</tr>
<tr class="even">
<td align="left">000000271</td>
<td align="right">33000</td>
</tr>
<tr class="odd">
<td align="left">000000366</td>
<td align="right">68500</td>
</tr>
<tr class="even">
<td align="left">However, the</td>
<td align="right">total number of cases will be different because vacant units and group quarters are missing</td>
</tr>
</tbody>
</table>
<pre class="r"><code>nrow(or_p %&gt;% filter(sporder==1))</code></pre>
<pre><code>## [1] 17985</code></pre>
<pre class="r"><code>nrow(or_h)</code></pre>
<pre><code>## [1] 19115</code></pre>
<p></font></p>
</div>
<div id="joining-person-and-housing-unit-tables-warning-continued" class="section level1">
<h1>Joining Person and Housing Unit Tables: WARNING (Continued)</h1>
<p><font size = "6px"> The estimates will be the same, but the standard errors will be inflated for the filtered person table (sporder==1) </font></p>
<pre class="r"><code># Households by Tenure: Housing Unit Results
kable(hu_result)</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">total</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>as.factor(ten)1</td>
<td align="right">637722</td>
<td align="right">6740</td>
</tr>
<tr class="even">
<td>as.factor(ten)2</td>
<td align="right">331449</td>
<td align="right">5156</td>
</tr>
<tr class="odd">
<td>as.factor(ten)3</td>
<td align="right">575449</td>
<td align="right">7060</td>
</tr>
<tr class="even">
<td>as.factor(ten)4</td>
<td align="right">27057</td>
<td align="right">2051</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#Households by Tenure: Filtered Person Table Results
kable(pfilter_result)</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">total</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>as.factor(ten)1</td>
<td align="right">637722</td>
<td align="right">9537</td>
</tr>
<tr class="even">
<td>as.factor(ten)2</td>
<td align="right">331449</td>
<td align="right">7287</td>
</tr>
<tr class="odd">
<td>as.factor(ten)3</td>
<td align="right">575449</td>
<td align="right">9992</td>
</tr>
<tr class="even">
<td>as.factor(ten)4</td>
<td align="right">27057</td>
<td align="right">2901</td>
</tr>
</tbody>
</table>
</div>
<div id="survey-package-calibrate-model" class="section level1">
<h1>Survey Package (Calibrate Model)</h1>
<p>Calibrate Survey Design to known estimates (User Verification)</p>
<pre class="r"><code>#Calculate total of vector &quot;sex&quot; from survey replicate design &quot;p_design&quot; and drop missing/null cases
kable(svytotal(~as.factor(sex),p_design,na.rm=T))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">total</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>as.factor(sex)1</td>
<td align="right">2032558</td>
<td align="right">3149</td>
</tr>
<tr class="even">
<td>as.factor(sex)2</td>
<td align="right">2060907</td>
<td align="right">3149</td>
</tr>
</tbody>
</table>
<pre class="r"><code>kable(svytotal(~as.factor(ten),h_design,na.rm=T))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">total</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>as.factor(ten)1</td>
<td align="right">637722</td>
<td align="right">6740</td>
</tr>
<tr class="even">
<td>as.factor(ten)2</td>
<td align="right">331449</td>
<td align="right">5156</td>
</tr>
<tr class="odd">
<td>as.factor(ten)3</td>
<td align="right">575449</td>
<td align="right">7060</td>
</tr>
<tr class="even">
<td>as.factor(ten)4</td>
<td align="right">27057</td>
<td align="right">2051</td>
</tr>
</tbody>
</table>
</div>
<div id="survey-package-examples" class="section level1">
<h1>Survey Package (Examples)</h1>
<pre class="r"><code># Population by Race and Ethnicity
kable(svytotal(~race_hisp,p_design,na.rm=T))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">total</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>race_hispwa</td>
<td align="right">3117131</td>
<td align="right">1817</td>
</tr>
<tr class="even">
<td>race_hispblack</td>
<td align="right">73476</td>
<td align="right">2699</td>
</tr>
<tr class="odd">
<td>race_hispai_an</td>
<td align="right">38681</td>
<td align="right">2293</td>
</tr>
<tr class="even">
<td>race_hispasian</td>
<td align="right">171350</td>
<td align="right">3647</td>
</tr>
<tr class="odd">
<td>race_hispnh_pi</td>
<td align="right">14991</td>
<td align="right">1917</td>
</tr>
<tr class="even">
<td>race_hispother</td>
<td align="right">6703</td>
<td align="right">1314</td>
</tr>
<tr class="odd">
<td>race_hispmulti</td>
<td align="right">148615</td>
<td align="right">4214</td>
</tr>
<tr class="even">
<td>race_hisphisp</td>
<td align="right">522518</td>
<td align="right">1031</td>
</tr>
</tbody>
</table>
<pre class="r"><code># Household Count by Race and Ethnicity of the Householder
kable(svytotal(~race_hisp,h_design,na.rm=T))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">total</th>
<th align="right">SE</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>race_hispwa</td>
<td align="right">1305064</td>
<td align="right">4046</td>
</tr>
<tr class="even">
<td>race_hispblack</td>
<td align="right">25155</td>
<td align="right">1341</td>
</tr>
<tr class="odd">
<td>race_hispai_an</td>
<td align="right">11853</td>
<td align="right">1117</td>
</tr>
<tr class="even">
<td>race_hispasian</td>
<td align="right">56298</td>
<td align="right">1914</td>
</tr>
<tr class="odd">
<td>race_hispnh_pi</td>
<td align="right">3327</td>
<td align="right">582</td>
</tr>
<tr class="even">
<td>race_hispother</td>
<td align="right">1854</td>
<td align="right">483</td>
</tr>
<tr class="odd">
<td>race_hispmulti</td>
<td align="right">41013</td>
<td align="right">2339</td>
</tr>
<tr class="even">
<td>race_hisphisp</td>
<td align="right">127113</td>
<td align="right">3115</td>
</tr>
</tbody>
</table>
</div>
<div id="survey-package-calculate-cost-burdened-hh-by-race-ethnicity" class="section level1">
<h1>Survey Package (Calculate Cost Burdened HH by Race &amp; Ethnicity)</h1>
<p><font size = "6px"></p>
<pre class="r"><code>#Cost Burdened Households by Race &amp; Ethnicity
kable(svyby(~burden,~race_hisp,h_design,svytotal,na.rm=T) %&gt;% as.data.frame(.) %&gt;% 
        rename(burdened=burdenburdened,notburdened=`burdennot burdened`,burdened_se=se1,notburdened_se=se2) %&gt;%
        select(race_hisp,burdened,burdened_se,notburdened, notburdened_se))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">race_hisp</th>
<th align="right">burdened</th>
<th align="right">burdened_se</th>
<th align="right">notburdened</th>
<th align="right">notburdened_se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>wa</td>
<td align="left">wa</td>
<td align="right">427740</td>
<td align="right">6437</td>
<td align="right">877324</td>
<td align="right">6977</td>
</tr>
<tr class="even">
<td>black</td>
<td align="left">black</td>
<td align="right">11701</td>
<td align="right">1390</td>
<td align="right">13454</td>
<td align="right">1413</td>
</tr>
<tr class="odd">
<td>ai_an</td>
<td align="left">ai_an</td>
<td align="right">5514</td>
<td align="right">829</td>
<td align="right">6339</td>
<td align="right">797</td>
</tr>
<tr class="even">
<td>asian</td>
<td align="left">asian</td>
<td align="right">18126</td>
<td align="right">1547</td>
<td align="right">38172</td>
<td align="right">1869</td>
</tr>
<tr class="odd">
<td>nh_pi</td>
<td align="left">nh_pi</td>
<td align="right">1284</td>
<td align="right">466</td>
<td align="right">2043</td>
<td align="right">492</td>
</tr>
<tr class="even">
<td>other</td>
<td align="left">other</td>
<td align="right">824</td>
<td align="right">329</td>
<td align="right">1030</td>
<td align="right">354</td>
</tr>
<tr class="odd">
<td>multi</td>
<td align="left">multi</td>
<td align="right">16907</td>
<td align="right">1486</td>
<td align="right">24106</td>
<td align="right">1892</td>
</tr>
<tr class="even">
<td>hisp</td>
<td align="left">hisp</td>
<td align="right">51660</td>
<td align="right">2699</td>
<td align="right">75453</td>
<td align="right">2517</td>
</tr>
<tr class="odd">
<td></font></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="survey-package-household-income-by-race-ethnicity" class="section level1">
<h1>Survey Package (Household Income by Race &amp; Ethnicity)</h1>
<p><font size = "5px"></p>
<pre class="r"><code>#Median Household Income for Oregon
kable(svyquantile(~hincp,h_design,quantiles=.5,na.rm=T) %&gt;% as.data.frame(.))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="right">quantiles</th>
<th align="right">hincp.1</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>q0.5</td>
<td align="right">56200</td>
<td align="right">650</td>
</tr>
</tbody>
</table>
<pre class="r"><code>#Median Household Income by Race &amp; Ethnicity for Oregon
kable(svyby(~hincp,~race_hisp,h_design,svyquantile,quantiles=.5,na.rm=T) %&gt;% as.data.frame(.) %&gt;% rename(HH_inc=V1))</code></pre>
<table>
<thead>
<tr class="header">
<th></th>
<th align="left">race_hisp</th>
<th align="right">HH_inc</th>
<th align="right">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>wa</td>
<td align="left">wa</td>
<td align="right">58525</td>
<td align="right">750</td>
</tr>
<tr class="even">
<td>black</td>
<td align="left">black</td>
<td align="right">35086</td>
<td align="right">3498</td>
</tr>
<tr class="odd">
<td>ai_an</td>
<td align="left">ai_an</td>
<td align="right">32000</td>
<td align="right">4124</td>
</tr>
<tr class="even">
<td>asian</td>
<td align="left">asian</td>
<td align="right">70000</td>
<td align="right">4127</td>
</tr>
<tr class="odd">
<td>nh_pi</td>
<td align="left">nh_pi</td>
<td align="right">58070</td>
<td align="right">15988</td>
</tr>
<tr class="even">
<td>other</td>
<td align="left">other</td>
<td align="right">52741</td>
<td align="right">14570</td>
</tr>
<tr class="odd">
<td>multi</td>
<td align="left">multi</td>
<td align="right">47976</td>
<td align="right">1966</td>
</tr>
<tr class="even">
<td>hisp</td>
<td align="left">hisp</td>
<td align="right">44408</td>
<td align="right">2000</td>
</tr>
<tr class="odd">
<td></font></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="survey-package-regression" class="section level1">
<h1>Survey Package (Regression)</h1>
<pre class="r"><code># Household Income regressed on Race &amp; Ethnicity of Householder
model&lt;-svyglm(hincp ~ race_hisp ,h_design)
stargazer(model, type=&quot;text&quot;)</code></pre>
<pre><code>## 
## =============================================
##                       Dependent variable:    
##                   ---------------------------
##                              hincp           
## ---------------------------------------------
## race_hispblack          -28,615.000***       
##                           (3,695.000)        
##                                              
## race_hispai_an          -32,570.000***       
##                           (4,011.000)        
##                                              
## race_hispasian           26,631.000***       
##                           (5,568.000)        
##                                              
## race_hispnh_pi           -17,335.000*        
##                           (8,792.000)        
##                                              
## race_hispother            -11,172.000        
##                          (15,621.000)        
##                                              
## race_hispmulti          -14,272.000***       
##                           (3,500.000)        
##                                              
## race_hisphisp           -20,225.000***       
##                           (2,267.000)        
##                                              
## Constant                 78,277.000***       
##                            (630.000)         
##                                              
## ---------------------------------------------
## Observations                16,198           
## Log Likelihood           -206,651.000        
## Akaike Inf. Crit.         413,318.000        
## =============================================
## Note:             *p&lt;0.1; **p&lt;0.05; ***p&lt;0.01</code></pre>
<pre class="r"><code>1-model$deviance/model$null.deviance</code></pre>
<pre><code>## [1] 0.014</code></pre>
</div>
<div id="survey-vs-srvyr-package-workflow-using-survey" class="section level1">
<h1>survey vs srvyr package (workflow using survey)</h1>
<p><font size = "6px"></p>
<pre class="r"><code>#Design
h_design&lt;-svrepdesign(weights= ~wgtp,
               repweights = &#39;wgtp[0-9]+&#39;,
               scale=4/80,
               rscales = ncol(&#39;wgtp[0-9]+&#39;),
               mse=T,
               combined.weights = T,
               type=&#39;JK1&#39;,
               data= h_join)

# Calculate Burdened and Not Burdened Households by Race &amp; Ethnicity (Survey Package)
data_survey&lt;-svyby(~burden,~race_hisp,h_design,svytotal,na.rm=T) %&gt;% as.data.frame(.) %&gt;%
 rename(burdened=burdenburdened,notburdened=`burdennot burdened`,burdened_se=se1,notburdened_se=se2) %&gt;% 
  select(race_hisp,burdened,burdened_se,notburdened, notburdened_se)

# Transform to Long Form
survey_output&lt;- cbind(data_survey %&gt;% select(race_hisp,burdened,notburdened) %&gt;% gather(.,burden_class,estimate,2:3),
data_survey %&gt;% select(race_hisp,burdened_se,notburdened_se) %&gt;% gather(.,burden_class,se,2:3) %&gt;% select(-1,-2)) %&gt;% 
  select(burden_class, race_hisp, estimate,se) %&gt;% arrange(race_hisp,burden_class)</code></pre>
<p></font></p>
</div>
<div id="survey-vs-srvyr-package-workflow-using-survey-continued" class="section level1">
<h1>survey vs srvyr package (workflow using survey continued)</h1>
<pre class="r"><code>kable(survey_output)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">burden_class</th>
<th align="left">race_hisp</th>
<th align="right">estimate</th>
<th align="right">se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">wa</td>
<td align="right">427740</td>
<td align="right">6437</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">wa</td>
<td align="right">877324</td>
<td align="right">6977</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">black</td>
<td align="right">11701</td>
<td align="right">1390</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">black</td>
<td align="right">13454</td>
<td align="right">1413</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">ai_an</td>
<td align="right">5514</td>
<td align="right">829</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">ai_an</td>
<td align="right">6339</td>
<td align="right">797</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">asian</td>
<td align="right">18126</td>
<td align="right">1547</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">asian</td>
<td align="right">38172</td>
<td align="right">1869</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">nh_pi</td>
<td align="right">1284</td>
<td align="right">466</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">nh_pi</td>
<td align="right">2043</td>
<td align="right">492</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">other</td>
<td align="right">824</td>
<td align="right">329</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">other</td>
<td align="right">1030</td>
<td align="right">354</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">multi</td>
<td align="right">16907</td>
<td align="right">1486</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">multi</td>
<td align="right">24106</td>
<td align="right">1892</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">hisp</td>
<td align="right">51660</td>
<td align="right">2699</td>
</tr>
<tr class="even">
<td align="left">notburdened</td>
<td align="left">hisp</td>
<td align="right">75453</td>
<td align="right">2517</td>
</tr>
</tbody>
</table>
</div>
<div id="survey-vs-srvyr-package-workflow-using-srvry" class="section level1">
<h1>survey vs srvyr package (workflow using srvry)</h1>
<p><font size = "6px"></p>
<pre class="r"><code># design
h_design2&lt;- h_join %&gt;% as_survey_rep(weights=wgtp,
                                  repweights=starts_with(&quot;wgtp&quot;),
                                  combined_weights=T,
                                  type=&quot;JK1&quot;,
                                  scale=4/80,
                                  rscales=ncol(&#39;wgtp[0-9]+&#39;))

# Calculate Burdened and Not Burdened Households by Race &amp; Ethnicity(srvyr Package)
kable(h_design2 %&gt;% group_by(burden,race_hisp) %&gt;% summarise(hh=survey_total(,na.rm=T)) %&gt;% arrange(race_hisp,burden))</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">burden</th>
<th align="left">race_hisp</th>
<th align="right">hh</th>
<th align="right">hh_se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">wa</td>
<td align="right">427740</td>
<td align="right">6437</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">wa</td>
<td align="right">877324</td>
<td align="right">6977</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">black</td>
<td align="right">11701</td>
<td align="right">1390</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">black</td>
<td align="right">13454</td>
<td align="right">1413</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">ai_an</td>
<td align="right">5514</td>
<td align="right">829</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">ai_an</td>
<td align="right">6339</td>
<td align="right">797</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">asian</td>
<td align="right">18126</td>
<td align="right">1547</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">asian</td>
<td align="right">38172</td>
<td align="right">1869</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">nh_pi</td>
<td align="right">1284</td>
<td align="right">466</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">nh_pi</td>
<td align="right">2043</td>
<td align="right">492</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">other</td>
<td align="right">824</td>
<td align="right">329</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">other</td>
<td align="right">1030</td>
<td align="right">354</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">multi</td>
<td align="right">16907</td>
<td align="right">1486</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">multi</td>
<td align="right">24106</td>
<td align="right">1892</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">hisp</td>
<td align="right">51660</td>
<td align="right">2699</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">hisp</td>
<td align="right">75453</td>
<td align="right">2517</td>
</tr>
<tr class="odd">
<td align="left"></font></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
<div id="mhi-by-cost-burden-and-race-ethnicity-srvyr" class="section level1">
<h1>MHI by Cost Burden and Race &amp; Ethnicity (srvyr)</h1>
<p><font size = "6px"></p>
<pre class="r"><code>kable(h_design2 %&gt;% group_by(burden,race_hisp) %&gt;% summarise(hh=survey_total(,na.rm=T),MHI=survey_median(hincp,na.rm=T,vartype=&quot;se&quot;)) %&gt;% 
  #Create Total Households by Race &amp; Ethnicity
  group_by(race_hisp)%&gt;% mutate(total=sum(hh),total_se=moe_sum(hh_se,hh)) %&gt;%
  #Ungroup and calculate shares and sampling error
  ungroup() %&gt;% mutate(MHI_cv= 100*MHI_q50_se/MHI_q50,
                       hh_share= 100*hh/total,
                    hh_share_se= 100*moe_prop(hh,total,hh_se,total_se)) %&gt;%
  #remove hh fields and arrange by Race &amp; Ethnicity and Burden
  select(-total,-total_se,-hh,-hh_se) %&gt;% arrange(race_hisp,burden)
)</code></pre>
<table>
<thead>
<tr class="header">
<th align="left">burden</th>
<th align="left">race_hisp</th>
<th align="right">MHI_q50</th>
<th align="right">MHI_q50_se</th>
<th align="right">MHI_cv</th>
<th align="right">hh_share</th>
<th align="right">hh_share_se</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">wa</td>
<td align="right">28001</td>
<td align="right">553</td>
<td align="right">1.98</td>
<td align="right">33</td>
<td align="right">0.43</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">wa</td>
<td align="right">80000</td>
<td align="right">583</td>
<td align="right">0.73</td>
<td align="right">67</td>
<td align="right">0.22</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">black</td>
<td align="right">22000</td>
<td align="right">2048</td>
<td align="right">9.31</td>
<td align="right">47</td>
<td align="right">4.14</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">black</td>
<td align="right">59812</td>
<td align="right">6669</td>
<td align="right">11.15</td>
<td align="right">53</td>
<td align="right">3.71</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">ai_an</td>
<td align="right">19611</td>
<td align="right">2139</td>
<td align="right">10.91</td>
<td align="right">47</td>
<td align="right">5.34</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">ai_an</td>
<td align="right">52852</td>
<td align="right">4962</td>
<td align="right">9.39</td>
<td align="right">53</td>
<td align="right">4.27</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">asian</td>
<td align="right">27413</td>
<td align="right">3331</td>
<td align="right">12.15</td>
<td align="right">32</td>
<td align="right">2.37</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">asian</td>
<td align="right">108000</td>
<td align="right">6172</td>
<td align="right">5.72</td>
<td align="right">68</td>
<td align="right">1.58</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">nh_pi</td>
<td align="right">27875</td>
<td align="right">7201</td>
<td align="right">25.83</td>
<td align="right">39</td>
<td align="right">11.58</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">nh_pi</td>
<td align="right">86427</td>
<td align="right">11335</td>
<td align="right">13.11</td>
<td align="right">61</td>
<td align="right">7.90</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">other</td>
<td align="right">19285</td>
<td align="right">3766</td>
<td align="right">19.53</td>
<td align="right">44</td>
<td align="right">13.43</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">other</td>
<td align="right">70174</td>
<td align="right">23545</td>
<td align="right">33.55</td>
<td align="right">56</td>
<td align="right">12.46</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">multi</td>
<td align="right">23391</td>
<td align="right">1887</td>
<td align="right">8.07</td>
<td align="right">41</td>
<td align="right">2.70</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">multi</td>
<td align="right">71117</td>
<td align="right">4728</td>
<td align="right">6.65</td>
<td align="right">59</td>
<td align="right">3.06</td>
</tr>
<tr class="odd">
<td align="left">burdened</td>
<td align="left">hisp</td>
<td align="right">25000</td>
<td align="right">913</td>
<td align="right">3.65</td>
<td align="right">41</td>
<td align="right">1.76</td>
</tr>
<tr class="even">
<td align="left">not burdened</td>
<td align="left">hisp</td>
<td align="right">65000</td>
<td align="right">1601</td>
<td align="right">2.46</td>
<td align="right">59</td>
<td align="right">0.98</td>
</tr>
<tr class="odd">
<td align="left"></font></td>
<td align="left"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
<td align="right"></td>
</tr>
</tbody>
</table>
</div>
